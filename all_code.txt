\n===== ./package.json =====\n
{
  "name": "nextjs-tambo-ui-starter",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "eslint . --ext .js,.jsx,.ts,.tsx",
    "typecheck": "tsc --noEmit",
    "format": "prettier --write .",
    "prettier-check": "prettier --check ."
  },
  "dependencies": {
    "@tambo-ai/react": "^0.72.0",
    "@valibot/to-json-schema": "^1.5.0",
    "effect": "^3.19.15",
    "next": "15.1.11",
    "react": "19.0.0",
    "react-dom": "19.0.0",
    "zod": "^4.3.6"
  },
  "devDependencies": {
    "@tailwindcss/postcss": "^4.1.18",
    "@types/node": "25.1.0",
    "@types/react": "19.2.10",
    "@types/react-dom": "19.0.2",
    "autoprefixer": "^10.4.23",
    "eslint": "^9.39.2",
    "eslint-config-next": "^16.1.6",
    "eslint-config-prettier": "^10.1.8",
    "postcss": "^8.5.6",
    "prettier": "^3.8.1",
    "tailwindcss": "^4.1.18",
    "typescript": "5.9.3"
  }
}
\n===== ./next.config.ts =====\n
// ===== FILE: next.config.ts =====
import type { NextConfig } from 'next';

const nextConfig: NextConfig = {
  reactStrictMode: true,

  // Simple webpack config - just ignore the sury module
  webpack: (config) => {
    // Ignore the sury module completely
    config.resolve.fallback = {
      ...config.resolve.fallback,
      sury: false,
    };

    return config;
  },

  eslint: {
    ignoreDuringBuilds: true,
  },

  typescript: {
    ignoreBuildErrors: true,
  },
};

export default nextConfig;
\n===== ./tsconfig.json =====\n
{
  "compilerOptions": {
    "target": "ES2020",
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": ["./src/*"]
    },
    "types": ["node", "react", "react-dom", "next", "estree"]
  },
  "include": ["next-env.d.ts", "**/*.ts", "**/*.tsx", ".next/types/**/*.ts"],
  "exclude": ["node_modules"]
}
\n===== ./postcss.config.js =====\n
module.exports = {
  plugins: {
    '@tailwindcss/postcss': {},
    autoprefixer: {},
  },
};
\n===== ./tailwind.config.ts =====\n
import type { Config } from 'tailwindcss';

const config: Config = {
  content: [
    './src/pages/**/*.{js,ts,jsx,tsx,mdx}',
    './src/components/**/*.{js,ts,jsx,tsx,mdx}',
    './src/app/**/*.{js,ts,jsx,tsx,mdx}',
  ],
  theme: {
    extend: {},
  },
  plugins: [],
};

export default config;
\n===== ./eslint.config.mjs =====\n
import { defineConfig, globalIgnores } from 'eslint/config';
import nextVitals from 'eslint-config-next/core-web-vitals';
import nextTs from 'eslint-config-next/typescript';

const eslintConfig = defineConfig([
  ...nextVitals,
  ...nextTs,
  // Override default ignores of eslint-config-next.
  globalIgnores([
    // Default ignores of eslint-config-next:
    '.next/**',
    'out/**',
    'build/**',
    'next-env.d.ts',
  ]),
]);

export default eslintConfig;
\n===== ./README.md =====\n
AI Dashboard Assistant - Tambo UI Starter

A minimal Next.js + Tambo AI starter for building AI-powered dashboards where users generate UI components using natural language.
This template focuses on clean Tambo integration, typed components, and real-time UI rendering.

What This Template Does

This project demonstrates how to:

Use Tambo AI to generate UI components from natural language

Render dashboards dynamically inside a Next.js App Router project

Define strict, schema-driven components that AI can safely render

Build interactive dashboards without hardcoding UI layouts

This is a starter, not a showcase. It’s meant to be extended.

Features

AI-driven UI generation using Tambo

Real-time component rendering

Typed, schema-validated components

Clean Next.js App Router setup

Tailwind-based responsive layout

Simple, readable component architecture

Prerequisites

You’ll need:

Node.js 18+

npm

A Tambo AI API key

Getting Started
1. Clone the Repository
git clone 
cd nextjs-tambo-ui-starter
npm install

2. Environment Variables

Create a .env.local file in the root:

NEXT_PUBLIC_TAMBO_API_KEY=your_tambo_api_key_here

3. Run the App
npm run dev


Open http://localhost:3000 to view the dashboard.

Project Structure
src/
├── app/
│   ├── api/chat/route.ts      # Tambo AI chat endpoint
│   ├── client-providers.tsx   # Tambo provider setup
│   ├── globals.css            # Global styles
│   ├── layout.tsx             # Root layout
│   └── page.tsx               # Main dashboard page
│
└── components/
    └── tambo/
        ├── Dashboard.tsx      # Main AI dashboard UI
        ├── DataTable.tsx      # Tabular data component
        ├── MetricCard.tsx     # Metric display component
        ├── StatusBadge.tsx    # Status indicator component
        ├── ComponentParser.tsx# Maps AI output to components
        └── index.ts           # Component registry

How It Works

User types a natural language prompt

Prompt is sent to /api/chat

Tambo AI responds with structured component instructions

ComponentParser validates props using Zod

Matching UI components render in real time

No layout logic is hardcoded.

Usage Examples

Try prompts like:

Compare Kaushalendra vs Meenakshi expenses, savings, burn rate, and financial risk

Show a dashboard for Kaushalendra using https://github.com/Kaushalendra-Marcus data to highlight performance and impact

Create a sales metrics dashboard

Display system health status

The AI chooses the correct components automatically.

Built-in Components
DataTable

Use for comparisons, reports, and lists.

Typical use cases:

Expense comparisons

Payment reports

User activity summaries

MetricCard

Use for single metrics with trends.

Typical use cases:

Sales KPIs

Revenue metrics

Growth indicators

StatusBadge

Use for status and alerts.

Typical use cases:

System health

Payment states

Operational alerts

Adding Custom Components

Create a new component in src/components/tambo/

Define a strict Zod schema for props

Export the component in this format:

export const YourComponent = {
  name: "YourComponent",
  description: "Used to display ...",
  component: YourComponentFunction,
  propsSchema: YourComponentSchema,
};


Register it in components/tambo/index.ts

Tambo requires explicit schemas. No passthrough props.

Troubleshooting
Component Not Rendering

Check the AI response structure in /api/chat/route.ts

Verify the component is registered in index.ts

Ensure Zod schemas are strict

API Key Issues

Confirm .env.local exists

Restart the dev server after changes

Validation Errors

Avoid .passthrough() in Zod schemas

Define all expected props explicitly

Deployment
Vercel (Recommended)

Push the repo to GitHub

Import into Vercel

Add NEXT_PUBLIC_TAMBO_API_KEY as an environment variable

Deploy

Self-Hosted
npm run build
npm run start

License

MIT License
See LICENSE for details.

Contributing

Fork the repo

Create a feature branch

Keep the template minimal and clean

Open a pull request with a clear description\n===== ./next-env.d.ts =====\n
/// <reference types="next" />
/// <reference types="next/image-types/global" />

// NOTE: This file should not be edited
// see https://nextjs.org/docs/app/api-reference/config/typescript for more information.
\n===== ./src/app/globals.css =====\n
@import 'tailwindcss';
/* ===== FILE: src/app/globals.css =====

:root {
  --background: #ffffff;
  --foreground: #0f172a;
  --border: #e2e8f0;
  --accent: #3b82f6;
  --accent-light: #eff6ff;
}

body {
  color: var(--foreground);
  background: var(--background);
  font-feature-settings: "ss01", "ss02", "cv01", "cv02";
}

* {
  box-sizing: border-box;
}

/* Minimal focus styles */
:focus-visible {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 6px;
}

::-webkit-scrollbar-track {
  background: #f8fafc;
}

::-webkit-scrollbar-thumb {
  background: #cbd5e1;
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: #94a3b8;
}
\n===== ./src/app/client-providers.tsx =====\n
'use client';

import { TamboProvider } from '@tambo-ai/react';
import { ReactNode } from 'react';
import { components } from '@/components/tambo';

interface ClientProvidersProps {
  children: ReactNode;
}

export function ClientProviders({ children }: ClientProvidersProps) {
  const apiKey = process.env.NEXT_PUBLIC_TAMBO_API_KEY ?? '';

  if (!apiKey) {
    console.error('NEXT_PUBLIC_TAMBO_API_KEY is not set!');
  } else {
    console.log('API Key loaded');
  }

  console.log('Registering components:', components.length);

  return (
    <TamboProvider apiKey={apiKey} components={components}>
      {children}
    </TamboProvider>
  );
}
\n===== ./src/app/layout.tsx =====\n
import type { Metadata } from 'next';
import { Inter } from 'next/font/google';
import './globals.css';
import { ClientProviders } from './client-providers';

const inter = Inter({ subsets: ['latin'] });

export const metadata: Metadata = {
  title: 'Tambo Analytics Dashboard',
  description: 'AI-Powered Business Intelligence Platform',
};

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}): React.ReactElement {
  return (
    <html lang="en" className={inter.className}>
      <body className="antialiased">
        <ClientProviders>{children}</ClientProviders>
      </body>
    </html>
  );
}
\n===== ./src/app/page.tsx =====\n
'use client';

import { Dashboard } from '@/components/tambo/Dashboard';

export default function Home(): React.ReactElement {
  return <Dashboard />;
}
\n===== ./src/app/api/chat/route.ts =====\n
import { NextRequest, NextResponse } from 'next/server';

const SYSTEM_PROMPT = `You are an AI assistant that MUST return structured JSON for Tambo to render UI components.

IMPORTANT: You MUST always return JSON in this exact format:
{
  "type": "component",
  "component": "ComponentName", 
  "props": { ... },
  "text": "Optional explanation"
}

AVAILABLE COMPONENTS:

1. DataTable: For comparisons, lists, reports
Props: {
  "title": "string",
  "rows": [
    {"name": "string", "value": "string", "status": "string"}
  ]
}

2. MetricCard: For single metrics
Props: {
  "title": "string", 
  "value": "string",
  "trend": "up|down|neutral",
  "description": "string"
}

3. StatusBadge: For status indicators  
Props: {
  "label": "string",
  "status": "success|warning|error|info",
  "description": "string"
}

RULES:
1. ALWAYS return valid JSON
2. NEVER use "info" as status in DataTable - use "Active" instead
3. For DataTable: status must be "Active", "Inactive", "Pending", "High", "Medium", "Low"
4. Generate realistic data if not provided
5. Use Indian Rupees (₹) format
6. Create 4-6 rows for comparisons

EXAMPLES:

User: "Compare Kaushal vs Meenakshi expenses"
Assistant: {
  "type": "component",
  "component": "DataTable",
  "props": {
    "title": "Kaushal vs Meenakshi Expenses",
    "rows": [
      {"name": "Gym", "value": "Kaushal: ₹36,000 | Meenakshi: ₹32,500", "status": "Active"},
      {"name": "Proteins", "value": "Kaushal: ₹29,000 | Meenakshi: ₹24,000", "status": "Active"}
    ]
  },
  "text": "Here's a comparison of their expenses."
}

User: "Show sales metrics"
Assistant: {
  "type": "component",
  "component": "MetricCard",
  "props": {
    "title": "Total Sales",
    "value": "₹1,24,500",
    "trend": "up",
    "description": "This quarter"
  },
  "text": "Sales are up this quarter."
}

User: "Show IIT Kanpur payment status"
Assistant: {
  "type": "component",
  "component": "DataTable",
  "props": {
    "title": "IIT Kanpur Payment Status",
    "rows": [
      {"name": "Pending", "value": "₹1,25,000", "status": "Pending"},
      {"name": "Paid", "value": "₹3,45,000", "status": "Active"},
      {"name": "Successful", "value": "₹2,80,000", "status": "Active"}
    ]
  },
  "text": "Payment breakdown for IIT Kanpur."
}

CRITICAL: If user asks for data/table/comparison, use DataTable. For single metric, use MetricCard. For status, use StatusBadge.
`;

export async function POST(request: NextRequest): Promise<NextResponse> {
  try {
    const { messages } = await request.json();
    const apiKey = process.env.TAMBO_API_KEY;

    if (!apiKey) {
      throw new Error('API key not configured');
    }

    console.log('Sending to AI:', {
      messageCount: messages.length,
      lastMessage: messages[messages.length - 1]?.content,
    });

    const response = await fetch('https://api.tambo.ai/v1/chat/completions', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        Authorization: `Bearer ${apiKey}`,
      },
      body: JSON.stringify({
        model: 'gpt-4o-mini',
        messages: [{ role: 'system', content: SYSTEM_PROMPT }, ...messages],
        temperature: 0.3, // Low for consistency
        response_format: { type: 'json_object' },
      }),
    });

    if (!response.ok) {
      const errorText = await response.text();
      throw new Error(`API error: ${response.status} - ${errorText}`);
    }

    const data = await response.json();
    const assistantMessage = data.choices[0]?.message.content ?? '{}';

    console.log('AI Response raw:', assistantMessage);

    try {
      const parsed = JSON.parse(assistantMessage);

      // Validate structure
      if (!parsed.type || !parsed.component) {
        console.error('Invalid response structure:', parsed);
        // Create a fallback DataTable
        return NextResponse.json({
          type: 'component',
          component: 'DataTable',
          props: {
            title: 'Data Response',
            rows: [{ name: 'Request', value: 'Processing', status: 'Active' }],
          },
          text: 'Processing your request...',
        });
      }

      return NextResponse.json(parsed);
    } catch (parseError) {
      console.error('JSON parse error:', parseError, 'Response:', assistantMessage);

     
      return NextResponse.json({
        type: 'component',
        component: 'DataTable',
        props: {
          title: 'Response',
          rows: [{ name: 'Message', value: assistantMessage.substring(0, 100), status: 'Active' }],
        },
        text: 'AI Response',
      });
    }
  } catch (error) {
    console.error('Chat API error:', error);
    return NextResponse.json({
      type: 'component',
      component: 'StatusBadge',
      props: {
        label: 'Error',
        status: 'error',
        description: 'Failed to process request',
      },
      text: 'There was an error processing your request.',
    });
  }
}
\n===== ./src/components/tambo/DataTable.tsx =====\n
import React from 'react';
import { z } from 'zod';

export const DataTablePropsSchema = z.object({
  title: z.string().default('Data Table'),
  rows: z
    .array(
      z.object({
        name: z.string().default('Item'),
        value: z.string().default('Value'),
        status: z.string().default('Active'),
      })
    )
    .default([]),
});

export type DataTableProps = z.infer<typeof DataTablePropsSchema>;

export function DataTableComponent({
  title = 'Data Table',
  rows = [],
}: DataTableProps): React.ReactElement {
  // Safely process rows
  const safeRows = Array.isArray(rows)
    ? rows
        .filter((row) => row != null)
        .map((row) => ({
          name: String(row.name || 'Unnamed'),
          value: String(row.value || 'N/A'),
          status: String(row.status || 'Active'),
        }))
    : [];

  const safeTitle = String(title || 'Data Table');

  if (safeRows.length === 0) {
    return (
      <div className="rounded-xl border-2 border-dashed border-gray-300 bg-gray-50 p-8 text-center">
        <div className="mb-3 text-gray-400">
          <svg className="mx-auto h-12 w-12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path
              strokeLinecap="round"
              strokeLinejoin="round"
              strokeWidth={1.5}
              d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
            />
          </svg>
        </div>
        <h3 className="mb-1 text-lg font-semibold text-gray-600">{safeTitle}</h3>
        <p className="text-gray-500">No data available. Ask the AI to generate specific data.</p>
      </div>
    );
  }

  return (
    <div className="rounded-xl border border-gray-200 bg-white shadow-md overflow-hidden">
      <div className="border-b border-gray-200 bg-gradient-to-r from-gray-50 to-white px-6 py-4">
        <div className="flex items-center justify-between">
          <h3 className="text-lg font-bold text-gray-900">{safeTitle}</h3>
          <span className="rounded-full bg-blue-100 px-3 py-1 text-xs font-semibold text-blue-800">
            {safeRows.length} items
          </span>
        </div>
      </div>

      <div className="overflow-x-auto">
        <table className="w-full min-w-full">
          <thead className="bg-gray-50 border-b border-gray-200">
            <tr>
              <th className="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-700">
                Item
              </th>
              <th className="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-700">
                Value
              </th>
              <th className="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-700">
                Status
              </th>
            </tr>
          </thead>
          <tbody className="divide-y divide-gray-200 bg-white">
            {safeRows.map((row, index) => (
              <tr key={index} className="hover:bg-gray-50 transition-colors">
                <td className="px-6 py-4 whitespace-nowrap">
                  <div className="text-sm font-medium text-gray-900">{row.name}</div>
                </td>
                <td className="px-6 py-4 whitespace-nowrap">
                  <div className="text-sm font-bold text-gray-900">{row.value}</div>
                </td>
                <td className="px-6 py-4 whitespace-nowrap">
                  <span
                    className={`inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold ${
                      row.status.toLowerCase().includes('active') ||
                      row.status.toLowerCase().includes('high') ||
                      row.status.toLowerCase().includes('success')
                        ? 'bg-green-100 text-green-800'
                        : row.status.toLowerCase().includes('inactive') ||
                            row.status.toLowerCase().includes('low')
                          ? 'bg-gray-100 text-gray-800'
                          : row.status.toLowerCase().includes('pending') ||
                              row.status.toLowerCase().includes('medium') ||
                              row.status.toLowerCase().includes('warning')
                            ? 'bg-amber-100 text-amber-800'
                            : row.status.toLowerCase().includes('error')
                              ? 'bg-red-100 text-red-800'
                              : 'bg-blue-100 text-blue-800'
                    }`}
                  >
                    {row.status}
                  </span>
                </td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>

      {safeRows.length > 5 && (
        <div className="border-t border-gray-200 bg-gray-50 px-6 py-3">
          <div className="text-xs text-gray-600">Showing {safeRows.length} items</div>
        </div>
      )}
    </div>
  );
}

export const DataTable = {
  name: 'DataTable',
  description: 'Display tabular data with rows containing name, value, and status fields.',
  component: DataTableComponent,
  propsSchema: DataTablePropsSchema,
};
\n===== ./src/components/tambo/MetricCard.tsx =====\n
import React from 'react';
import { z } from 'zod';

export const MetricCardPropsSchema = z.object({
  title: z.string().default('Metric'),
  value: z.string().default('0'),
  trend: z.enum(['up', 'down', 'neutral']).default('neutral'),
  description: z.string().optional().default(''),
});

export type MetricCardProps = z.infer<typeof MetricCardPropsSchema>;

export function MetricCardComponent({
  title = 'Metric',
  value = '0',
  trend = 'neutral',
  description = '',
}: MetricCardProps): React.ReactElement {
  // Safely handle all inputs
  const safeTitle = String(title || 'Metric');
  const safeValue = String(value || '0');
  const safeDescription = description ? String(description) : '';

  const trendConfig = {
    up: {
      color: 'text-green-600',
      bgColor: 'bg-green-50',
      icon: '↑',
    },
    down: {
      color: 'text-red-600',
      bgColor: 'bg-red-50',
      icon: '↓',
    },
    neutral: {
      color: 'text-gray-600',
      bgColor: 'bg-gray-50',
      icon: '→',
    },
  };

  const selectedTrend = trendConfig[trend];

  return (
    <div className="rounded-lg border border-gray-200 bg-white p-4">
      <div className="flex items-start justify-between">
        <div className="flex-1">
          <div className="text-sm text-gray-600">{safeTitle}</div>
          <div className="mt-1 text-2xl font-medium text-gray-900">{safeValue}</div>
          {safeDescription && <div className="mt-2 text-sm text-gray-500">{safeDescription}</div>}
        </div>
        <div
          className={`ml-4 flex h-10 w-10 items-center justify-center rounded ${selectedTrend.bgColor}`}
        >
          <span className={`text-lg font-medium ${selectedTrend.color}`}>{selectedTrend.icon}</span>
        </div>
      </div>
    </div>
  );
}

export const MetricCard = {
  name: 'MetricCard',
  description:
    'Display a metric with value and trend. Use for showing data points like revenue, users, or conversion rates.',
  component: MetricCardComponent,
  propsSchema: MetricCardPropsSchema,
};
\n===== ./src/components/tambo/index.ts =====\n
import { MetricCard } from './MetricCard';
import { StatusBadge } from './StatusBadge';
import { DataTable } from './DataTable';

export const components = [
  {
    name: DataTable.name,
    description: DataTable.description,
    component: DataTable.component,
    propsSchema: DataTable.propsSchema,
  },
  {
    name: MetricCard.name,
    description: MetricCard.description,
    component: MetricCard.component,
    propsSchema: MetricCard.propsSchema,
  },
  {
    name: StatusBadge.name,
    description: StatusBadge.description,
    component: StatusBadge.component,
    propsSchema: StatusBadge.propsSchema,
  },
];

export { MetricCard, StatusBadge, DataTable };
\n===== ./src/components/tambo/Dashboard.tsx =====\n
'use client';

import { useTamboThread, useTamboThreadInput } from '@tambo-ai/react';
import { useState, useRef, useEffect } from 'react';
import Image from 'next/image';
interface MessageContent {
  content?: string | { text?: string } | Array<{ text?: string }>;
  text?: string;
}
export function Dashboard() {
  const { thread } = useTamboThread();
  const { value, setValue, submit, isPending } = useTamboThreadInput();
  const messagesEndRef = useRef<HTMLDivElement>(null);

  const inputRef = useRef<HTMLInputElement>(null);

  useEffect(() => {
    if (messagesEndRef.current) {
      messagesEndRef.current.scrollIntoView({ behavior: 'smooth' });
    }
  }, [thread.messages]);

  // Log thread changes for debugging
  useEffect(() => {
    console.log('Thread updated:', {
      messageCount: thread.messages.length,
      lastMessage: thread.messages[thread.messages.length - 1],
    });
  }, [thread.messages]);

  const [suggestions] = useState([
    'Show a dashboard for Kaushalendra using https://github.com/Kaushalendra-Marcus data to highlight performance and impact',
    'Compare Kaushalendra vs Meenakshi expenses, savings, burn rate, and financial risk',
    'Show sales metrics with growth rate 117% in $',
    'Analyze Tambo AI revenue, burn rate, runway, and overall growth health',
    'Display system performance metrics (CPU, memory, uptime)',
    'Display system health status',
  ]);

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    if (value.trim()) {
      console.log('Submitting:', value);
      submit();
      setValue('');
    }
  };

  const handleSuggestionClick = (suggestion: string) => {
    setValue(suggestion);
    setTimeout(() => {
      const form = document.querySelector('form');
      if (form) {
        form.dispatchEvent(new Event('submit', { bubbles: true, cancelable: true }));
      }
    }, 50);
  };

  // Fixed getMessageContent function
  const getMessageContent = (message: MessageContent): string => {
    try {
      if (typeof message.content === 'string') {
        const contentStr = message.content;
        if (contentStr.startsWith('[') && contentStr.includes('"type":"text"')) {
          try {
            const parsedArray = JSON.parse(contentStr) as Array<{ text?: string }>;
            if (Array.isArray(parsedArray) && parsedArray.length > 0) {
              const firstItem = parsedArray[0];
              if (firstItem && firstItem.text) {
                return firstItem.text;
              }
            }
          } catch (e) {
            console.log('JSON parse failed:', e);
          }
        }
        if (contentStr.startsWith('{') && contentStr.includes('"text"')) {
          try {
            const parsedObj = JSON.parse(contentStr) as { text?: string };
            if (parsedObj && parsedObj.text) {
              return parsedObj.text;
            }
          } catch (e) {
            console.log('JSON parse failed:', e);
          }
        }

        return contentStr;
      }

      if (
        message.content &&
        typeof message.content === 'object' &&
        !Array.isArray(message.content)
      ) {
        const contentObj = message.content as { text?: string };
        if (contentObj.text) {
          return contentObj.text;
        }
      }

      if (message.content && Array.isArray(message.content)) {
        const contentArray = message.content as Array<{ text?: string }>;
        if (contentArray.length > 0) {
          const firstItem = contentArray[0];
          if (firstItem && firstItem.text) {
            return firstItem.text;
          }
        }
      }

      if (message.text) {
        return message.text;
      }

      if (message.content && typeof message.content === 'object') {
        return JSON.stringify(message.content);
      }

      return '';
    } catch (error) {
      console.error('Error getting message content:', error);
      return '';
    }
  };

  return (
    <div className="min-h-screen bg-gray-50">
      <header className="border-b border-gray-200 bg-white shadow-sm">
        <div className="mx-auto max-w-6xl px-4 py-3">
          <div className="flex items-center justify-between">
            <div className="flex items-center gap-3">
              <div className="relative h-9 w-9 overflow-hidden rounded-lg border border-gray-200 bg-gradient-to-br from-blue-500 to-purple-600">
                <Image src="/logo.png" alt="Logo" fill className="object-cover" priority />
              </div>
              <div className="text-sm">
                <span className="font-semibold text-gray-900">AI Dashboard Assistant</span>
                <span className="mx-2 text-gray-400">•</span>
                <span className="text-gray-600">Ask for data visualizations</span>
              </div>
            </div>
            <div className="flex items-center gap-2 rounded-full bg-green-50 px-3 py-1.5">
              <div className="h-2 w-2 rounded-full bg-green-500"></div>
              <span className="text-xs font-medium text-green-700">Connected</span>
            </div>
          </div>
        </div>
      </header>

      <main className="mx-auto max-w-6xl px-4 py-6">
        {thread.messages.filter((m) => m.role !== 'system').length === 0 && (
          <div className="mb-8 rounded-xl border border-gray-200 bg-gradient-to-r from-blue-50 to-white p-6 shadow-sm">
            <div className="mb-4 flex items-center gap-3">
              <div className="relative h-12 w-12 overflow-hidden rounded-full border-2 border-white shadow-md">
                <Image src="/logo.png" alt="AI Assistant" fill className="object-cover" />
              </div>
              <div>
                <h2 className="text-xl font-bold text-gray-900">Welcome to AI Dashboard</h2>
                <p className="text-sm text-gray-600">
                  I can create data visualizations, analyze metrics, and generate reports.
                </p>
              </div>
            </div>
            <div className="space-y-3">
              <p className="text-sm font-medium text-gray-700">Try asking me to:</p>
              <div className="flex flex-wrap gap-2">
                {suggestions.map((suggestion, index) => (
                  <button
                    key={index}
                    onClick={() => handleSuggestionClick(suggestion)}
                    className="rounded-lg border border-gray-200 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm transition-all hover:border-blue-300 hover:bg-blue-50 hover:text-blue-700"
                  >
                    {suggestion}
                  </button>
                ))}
              </div>
            </div>
          </div>
        )}

        <div className="mb-6 space-y-4">
          {thread.messages
            .filter((msg) => msg.role !== 'system')
            .map((message) => {
              const content = getMessageContent(message);

              return (
                <div key={message.id}>
                  {/* User message */}
                  {message.role === 'user' && content && (
                    <div className="mb-4 flex justify-end">
                      <div className="max-w-[80%] rounded-2xl rounded-br-none bg-gradient-to-r from-blue-600 to-blue-700 px-5 py-3 shadow-md">
                        <p className="text-white font-medium">{content}</p>
                      </div>
                    </div>
                  )}

                  {/* Assistant message */}
                  {message.role === 'assistant' && (
                    <div className="mb-6">
                      <div className="mb-3 flex items-start gap-3">
                        <div className="relative mt-1 h-9 w-9 flex-shrink-0 overflow-hidden rounded-full border-2 border-white shadow-sm">
                          <Image src="/logo.png" alt="AI Assistant" fill className="object-cover" />
                        </div>
                        <div className="flex-1 min-w-0">
                          {/* Render component */}
                          {message.renderedComponent && (
                            <div className="mb-4">{message.renderedComponent}</div>
                          )}

                          {/* Text explanation */}
                          {content && (
                            <div className="rounded-xl bg-white border border-gray-200 p-4 shadow-sm">
                              <p className="text-gray-700 leading-relaxed">{content}</p>
                            </div>
                          )}
                        </div>
                      </div>
                    </div>
                  )}
                </div>
              );
            })}
          <div ref={messagesEndRef} />
        </div>

        {/* Input area */}
        <div className="sticky bottom-6 rounded-xl border border-gray-200 bg-white p-5 shadow-lg">
          <form onSubmit={handleSubmit} className="space-y-3">
            <div className="flex items-center gap-2">
              <input
                ref={inputRef}
                type="text"
                value={value}
                onChange={(e) => setValue(e.target.value)}
                placeholder="Example: 'Show a dashboard for Kaushalendra using https://github.com/Kaushalendra-Marcus data to highlight performance and impact'"
                className="flex-1 rounded-xl border border-gray-300 bg-white px-5 py-3.5 text-gray-900 placeholder-gray-500 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20"
                disabled={isPending}
                autoFocus
              />
              <button
                type="submit"
                disabled={isPending || !value.trim()}
                className="rounded-xl bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-3.5 font-semibold text-white shadow-md transition-all hover:from-blue-700 hover:to-blue-800 disabled:opacity-50 disabled:cursor-not-allowed"
              >
                {isPending ? (
                  <span className="flex items-center gap-2">
                    <span className="h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"></span>
                    <span>Processing...</span>
                  </span>
                ) : (
                  'Send'
                )}
              </button>
            </div>

            {thread.messages.filter((m) => m.role !== 'system').length > 0 && (
              <div className="flex flex-wrap items-center gap-2">
                <span className="text-xs font-medium text-gray-500">Try:</span>
                {suggestions.slice(0, 3).map((suggestion, index) => (
                  <button
                    key={index}
                    type="button"
                    onClick={() => handleSuggestionClick(suggestion)}
                    className="rounded-lg border border-gray-200 bg-gray-50 px-3 py-1.5 text-xs font-medium text-gray-700 transition-all hover:border-gray-300 hover:bg-gray-100"
                  >
                    {suggestion}
                  </button>
                ))}
              </div>
            )}
          </form>
        </div>
      </main>
    </div>
  );
}
\n===== ./src/components/tambo/StatusBadge.tsx =====\n
import React from 'react';
import { z } from 'zod';

export const StatusBadgePropsSchema = z.object({
  label: z.string().default('Status'),
  status: z.enum(['success', 'warning', 'error', 'info']).default('success'),
  description: z.string().optional().default(''),
});

const validStatuses = ['success', 'warning', 'error', 'info'] as const;
type ValidStatus = (typeof validStatuses)[number];

// Check if the status is valid using type guard
function isValidStatus(status: string): status is ValidStatus {
  return validStatuses.includes(status as ValidStatus);
}

export type StatusBadgeProps = z.infer<typeof StatusBadgePropsSchema>;

export function StatusBadgeComponent({
  label = 'Status',
  status = 'success',
  description = '',
}: StatusBadgeProps): React.ReactElement {
  // Safely handle all inputs
  const safeLabel = String(label || 'Status');
  const safeDescription = description ? String(description) : '';

  // Validate status using type guard
  const lowerStatus = String(status).toLowerCase();
  const safeStatus = isValidStatus(lowerStatus) ? lowerStatus : 'info';

  const statusConfig = {
    success: {
      color: 'text-green-700',
      bgColor: 'bg-green-50',
      borderColor: 'border-green-200',
    },
    warning: {
      color: 'text-amber-700',
      bgColor: 'bg-amber-50',
      borderColor: 'border-amber-200',
    },
    error: {
      color: 'text-red-700',
      bgColor: 'bg-red-50',
      borderColor: 'border-red-200',
    },
    info: {
      color: 'text-blue-700',
      bgColor: 'bg-blue-50',
      borderColor: 'border-blue-200',
    },
  };

  const selectedStatus = statusConfig[safeStatus];

  return (
    <div
      className={`inline-flex flex-col rounded-lg border ${selectedStatus.borderColor} ${selectedStatus.bgColor} px-3 py-2`}
    >
      <div className="flex items-center gap-2">
        <div className={`h-2 w-2 rounded-full ${selectedStatus.color.replace('text', 'bg')}`}></div>
        <span className={`font-medium ${selectedStatus.color}`}>{safeLabel}</span>
      </div>
      {safeDescription && <div className="mt-1 text-sm text-gray-600">{safeDescription}</div>}
    </div>
  );
}

export const StatusBadge = {
  name: 'StatusBadge',
  description:
    'Display a status indicator. Use for showing system status, deployment status, or alerts.',
  component: StatusBadgeComponent,
  propsSchema: StatusBadgePropsSchema,
};
\n===== ./src/components/tambo/ComponentParser.tsx =====\n
'use client';

import React from 'react';
import { DataTableComponent } from './DataTable';
import { MetricCardComponent } from './MetricCard';
import { StatusBadgeComponent } from './StatusBadge';

export function parseAndRenderComponents(content: string): {
  components: React.ReactNode[];
  textContent: string;
} {
  const components: React.ReactNode[] = [];
  let textContent = content;

  // Parse DataTable components
  const dataTableRegex = /<DataTable\s+title="([^"]+)"\s+rows=\{(\[[^\]]+\])\}\s*\/>/gs;
  let match;
  let componentIndex = 0;

  while ((match = dataTableRegex.exec(content)) !== null) {
    const title = match[1];
    const rowsString = match[2];

    try {
      // Clean up the JSON string
      const cleanedRows = rowsString
        .replace(/'/g, '"') 
        .replace(/(\w+):/g, '"$1":'); 

      const rows = JSON.parse(cleanedRows);

      components.push(
        <DataTableComponent key={`datatable-${componentIndex++}`} title={title} rows={rows} />
      );

     
      textContent = textContent.replace(match[0], '');
    } catch (e) {
      console.error('Failed to parse DataTable:', e, rowsString);
    }
  }

  // Parse MetricCard components
  const metricCardRegex =
    /<MetricCard\s+title="([^"]+)"\s+value="([^"]+)"\s+trend="(up|down|neutral)"(?:\s+description="([^"]+)")?\s*\/>/gs;

  while ((match = metricCardRegex.exec(content)) !== null) {
    const title = match[1];
    const value = match[2];
    const trend = match[3] as 'up' | 'down' | 'neutral';
    const description = match[4] || '';

    components.push(
      <MetricCardComponent
        key={`metric-${componentIndex++}`}
        title={title}
        value={value}
        trend={trend}
        description={description}
      />
    );

    textContent = textContent.replace(match[0], '');
  }

  // Parse StatusBadge components
  const statusBadgeRegex =
    /<StatusBadge\s+label="([^"]+)"\s+status="(success|warning|error|info)"(?:\s+description="([^"]+)")?\s*\/>/gs;

  while ((match = statusBadgeRegex.exec(content)) !== null) {
    const label = match[1];
    const status = match[2] as 'success' | 'warning' | 'error' | 'info';
    const description = match[3] || '';

    components.push(
      <StatusBadgeComponent
        key={`status-${componentIndex++}`}
        label={label}
        status={status}
        description={description}
      />
    );

    textContent = textContent.replace(match[0], '');
  }


  textContent = textContent.trim();

  return { components, textContent };
}
